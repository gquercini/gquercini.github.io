<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Gianluca Quercini">

  
  
  
    
  
  <meta name="description" content="tutorial-netbasics">

  
  <link rel="alternate" hreflang="en-us" href="/courses/network/labs/netbasics/">

  


  
  
  
  <meta name="theme-color" content="rgb(0, 136, 204)">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  


  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu68b06f59cdf252d86e7129a31e131766_426695_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu68b06f59cdf252d86e7129a31e131766_426695_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="/courses/network/labs/netbasics/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Gianluca Quercini">
  <meta property="og:url" content="/courses/network/labs/netbasics/">
  <meta property="og:title" content="Simulation d&#39;un réseau informatique | Gianluca Quercini">
  <meta property="og:description" content="tutorial-netbasics"><meta property="og:image" content="img/map[gravatar:%!s(bool=true) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=true) shape:circle]"><meta property="og:locale" content="en-us">
  
    
    
  

  



  


  


  





  <title>Simulation d&#39;un réseau informatique | Gianluca Quercini</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Gianluca Quercini</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Gianluca Quercini</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


  

  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      


<script src="/js/toggle-menu.js"></script>







  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="Labs" class="docs-toc-link" href="/courses/network/labs/http-lab/">Labs</a>
    
    <div id="Labs-ddowncontent" class="Labs-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="Labs">
        <a href="/courses/network/labs/http-lab/">1. Etude de cas: HTTP</a>
      </li>
      
      
      <li class="Labs">
        <a href="/courses/network/labs/dhcp-lab/">2. Etude de cas: DHCP</a>
      </li>
      
      
      <li class="Labs">
        <a href="/courses/network/labs/icmp-lab/">3. Etude de cas: ICMP</a>
      </li>
      
      <script>open_menu_on_load("Labs".concat("-ddowncontent"))</script>
      <li class="active Labs">
        <a href="/courses/network/labs/netbasics/">3. Simulation d&#39;un réseau informatique</a>
      </li>
      
      
      <li class="Labs">
        <a href="/courses/network/labs/routing/">4. Routage IPv4</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  
</nav>

    </div>

    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          <div class="heading">Simulation d&#39;un réseau informatique</div>
          <h1>Simulation d&#39;un réseau informatique</h1>
          <hr>
          <div class="logo">
            
            </div>

          <div class="article-style">
            
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p><link rel="stylesheet" href="/styles/course.css">
<link rel="stylesheet" href="/styles/cloud-computing.css"></p>
<p><!-- Ce TP a pour objectif de vous initier à la manipulation et à l'administration d'équipements
réseau courants et d'illustrer par la pratique certains concepts abordés en cours concernant les
protocoles de la pile TCP/IP.

::: {.infobox .warning data-latex="{warning}"}
**Informatios importantes**

Ce TP sera **évalué**. 

**Remise du devoir**  : il faut remettre **un seul fichier .zip** comprenant :

* Un rapport en PDF, complet d'une page de garde avec vos noms et prénoms et la date. 
Ecrivez une réponse pour chaque question. Ne vous limitez pas à des phrases courtes et ambiguës. 
La qualité et l'exhaustivité de vos réponses seront prises en compte dans la note finale.

* Un fichier ``basic-config.pkt`` contenant le réseau créé dans Cisco Packet Tracer pour répondre aux questions 2.1 et 2.2.

* Un fichier ``fullnet.pkt`` contenant le réseau créé dans Cisco Packet Tracer pour répondre à toutes les autres questions.


::: 

# Environnement de travail 

Pour ce TP nous allons utiliser Cisco Packet Tracer. 
Le logiciel permet de configurer et simuler un réseau. 
Il utilise des composants de la marque Cisco, 
un important fabricant sur le marché des équipements réseau professionnels.
D'autre importants fabriquants sont : Huawei, HPE, Nokia, Netgear, Dell, Juniper, Aerohive.

# Première configuration

Dans cette section, nous allons configurer un simple réseau point à point entre deux PC 
à l'aide d'un câble Ethernet.

* Démarrez avec un document Packet Tracer vierge ;

* Ajoutez deux PCs ;

* Reliez les deux PC par un câble ; 
vous pouvez utiliser le bouton vous permettant de choisir automatiquement le cable
(bouton avec un éclair orange come icône).

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-1"><strong>(\#exr:unnamed-chunk-1) </strong></span>
Quelles sont les informations nécessaires pour configurer correctement un PC sur ce réseau?

Précisez les valeurs numériques de ces informations que vous aurez choisies pour vos deux PCs.
</div>\EndKnitrBlock{exercise}

:::

Une fois que vous aurez configurez vos deux PCs, il faudra penser à vérifier que ces derniers peuvent communiquer correctement.
Nous allons utiliser la commande ```ping```.

::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activity**

* Cliquez sur l'un des PC, sélectionnez l'onglet Bureau et ouvrez une invite de commande.

* Tapez la commande ping avec le paramètre approprié pour envoyer un message à l'autre PC.

* Assurez-vous d'obtenir une réponse de l'autre PC.

:::

Cisco Packet Tracer fournit aussi un outil de simulation. 

::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activity**

* Passez en mode simulation (bouton en bas à droite de l'interface de Packet Tracer) ;

* Depuis l'invite de commande d'un PC, faites un ping vers l'autre PC ;

* Dans le panneau de simulation à droite, 
cliquez sur le bouton d'avancement pour dérouler l'animation.
Attendez quelques secondes (jusqu'à ce que vous ne voyiez plus de paquets de type ICMP apparaître), 
puis cliquez de nouveau sur le bouton pour arrêter la simulation. 
Vous pouvez maintenant examiner chacun des évènements de la liste en cliquant dessus.

:::

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-2"><strong>(\#exr:unnamed-chunk-2) </strong></span>

* Quel est le protocole utilisé par Ping ? Quelle est la signification de son acronyme ? 

* Sélectionnez l'un des messages échangés par les deux PC dans la fenêtre de simulation.  
D'après les informations qui s'affichent, pouvez-vous dire à quelle couche du modèle TCP/IP appartient ce protocole ? 

* Pouvez-vous expliquer les informations contenues dans un message de ce protocole ? 

</div>\EndKnitrBlock{exercise}

:::


**N'oubliez pas de sauvegarder l'espace de travail dans un fichier nommé ``basic-config.pkt`` avant de continuer.**

# Configuration d'un réseau local

Le réseau point à point que nous avons configuré dans la section précédente n'est pas couramment utilisé. 

Dans cette section, nous allons configurer un exemple réaliste de **réseau local**.



::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activity**

* Démarrez avec un document Packet Tracer vierge ;

* Ajoutez un commutateur, par exemple un 2960 (nous le nommerons C1).

* Ajoutez quatre PC dans votre réseau (nous les nommerons PC1, PC2, PC3, PC4) ;

* Reliez ces PC au commutateur.

:::

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-3"><strong>(\#exr:unnamed-chunk-3) </strong></span>

a. Quelles sont les informations nécessaires pour configurer correctement un PC sur ce réseau? 

b.  Pour chaque PC, donnez les valeurs numériques de ces informations.
</div>\EndKnitrBlock{exercise}

:::

Maintenant que vous avez configuré le réseau, vous devez tester que les PCs peuvent communiquer. 


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activity**

* Passez en mode simulation (bouton en bas à droite de l'interface de Packet Tracer) ;

* Dans le panneau de simulation à droite, 
cliquez sur le bouton d'avancement pour dérouler l'animation.

* Depuis l'invite de commande d'un PC, faites un ping vers un autre PC ;

* Déroulez la simulation jusqu'à ce que vous verrez sur l'invite de commande *Reply from...*. 
Seulement à ce moment, mettez en pause la simulation.

:::


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-4"><strong>(\#exr:unnamed-chunk-4) </strong></span>

a. Quels sont les protocoles qui interviennent dans ces échanges ?

b. En vous aidant de ressources en ligne, pourriez-vous décrire en quelque mots chaque protocole ?

c. Pourriez-vous expliquer les interactions ARP ?
</div>\EndKnitrBlock{exercise}

:::

# Interconnection de deux réseaux

Nous allons maintenant créer un **deuxième réseau**.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Choisissez une plage d'adresses pour un deuxième réseau IPv4 distinct du premier ;

* Créez un deuxième réseau comprenant au moins deux ordinateurs. N'essayez pas pour le moment de connecter les deux réseaux.

* Vérifiez que les ordinateurs du deuxième réseau puissent communiquer entre eux.

:::

Maintenant il faut connecter les deux réseaux à l'aide d'un **routeur**.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Ajoutez un routeur 1941 (que nous nommerons R1).

* Le routeur a deux interfaces réseaux, nommées *GigabitEthernet0/0* et *GigabitEthernet0/1*. Le routeur permet ainsi  l'interconnexion entre deux réseaux.

* Ajoutez les cables nécessaires pour connecter le premier réseau au deuxième à l'aide du routeur.

:::

Si vous avez bien fait le cablage, vous devriez remarquer des triangles rouges sur les cables reliant le routeur aux deux réseaux.
Cela indique un problème de connectivité que nous allons résoudre dans l'activité suivante.


:::{.infobox .curiosity data-latex="curiosity"}
**Bon à savoir**

Si vous passez la souris sur un cable, une info-bulle s'affiche indiquant les noms des interfaces réseaux reliées par le cable. 
Cela va vous être utile dans les activités suivantes.

:::



::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**


* Il faudra attribuer une adresse IPv4 à chacune des interfaces du routeur. **Attention**, l'adresse IP d'une interface doit être cohérente avec les adresses du réseau auquel l'interface est connectée.

* Pour ce faire, cliquez sur le routeur et sélectionnez *Config*. Vous verrez un onglet pour chaque interface dans le menu à gauche.

* Attribuez une adresse IPv4 à chaque interface. 

* N'oubliez pas de cocher la case *On* à côté de *Port status*. Cela sert à activer l'interface.

:::


Si votre configuration est correcte, les triangles rouges devraient changer de couleur et s'afficher en vert. 
La transition entre les deux couleurs pourrait prendre un certain délai, pendant lequel un cercle orange s'affiche. Cela est normal, il faut juste patienter quelques secondes.

:::{.infobox .curiosity data-latex="curiosity"}
**Bon à savoir**

Pensez à sauvegarder votre travail !

:::




::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-5"><strong>(\#exr:unnamed-chunk-5) </strong></span>

a. Passez en mode *realtime* (bouton en bas à droite dans l'interface de Packet Tracer).

b. Ouvrez l'invite de commande sur un PC du deuxième réseau et essayez de faire un ping vers l'un des ordinateurs du premier réseau.

c. Que se passe-t-il ? Pourriez-vous expliquer ce qui manque dans la configuration des PC pour permettre une communication entre les PC des deux réseaux ? 

d. Ajoutez les informations de configuration nécessaires aux PC.
</div>\EndKnitrBlock{exercise}

:::

Maintenant, on procède à une vérification finale.

::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**


* Vérifiez que vous pouvez toujours faire un *ping* entre deux PC d'un même réseau (par exemple PC1 et PC2). 
Si ce n'est pas le cas, cela signifie que votre configuration a regressé par rapport aux exercices précédents.

* Vérifiez que vous pouvez faire un *ping* entre tout PC d'un réseau et tout PC du deuxième réseau.

* Pensez également à faire un *ping* d'un PC vers les deux interfaces du routeur. 

:::

Si à l'issu de l'activité précédente il n'y a pas eu de problèmes de communications, cela veut dire que vous avez correctement configuré votre réseau local !

Il ne nous reste que comprendre un peu mieux ce qui se passe lorsqu'un PC d'un réseau fait un *ping* vers un PC de l'autre réseau, ce qui est l'objectif 
de l'activité suivante.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**


* Passez en mode *simulation*.

* Faites un *ping* d'un PC vers un PC de l'autre réseau.

* Laissez dérouler la simulation jusqu'à ce que le *ping reply* ne revienne à la source. A ce moment, mettez la simulation en pause.

:::

Maintenant, répondez aux questions suivantes :

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-6"><strong>(\#exr:unnamed-chunk-6) </strong></span>

Dans le panneau de simulation, considérez les messages ICMP (relatifs au *ping*).

a. Quel est le chemin suivi par ces messages ?

b. Pour chacun de ces messages: quelle est l'adresse MAC source ? 
À quel dispositif correspond cette adresse ?  
Quelle est l'adresse MAC destination ? À quel dispositif correspond cette adresse ?

c. Que pouvez-vous dire à propos des adresses IP source et destination de chacun de ces messages ?

d. Sur la base des observations faites aux questions précédentes, est-ce qu'un  commutateur change les adresses IP/MAC source/destination des messages ?

e. Sur la base des observations faites aux questions précédentes, est-ce qu'un  routeur change les adresses IP/MAC source/destination des messages ?
</div>\EndKnitrBlock{exercise}

:::


# Configuration d'un serveur DHCP

Dans les activités précédentes, nous avons manuellement configuré les adresses IP des PC. 
Dans un réseau domestique ou d'entreprise, cela obligerait toute personne souhaitant se connecter au réseau de rentrer cette configuration à la main. 


Dans la pratique, un serveur DHCP (Dynamic Host Configuration Protocol) nous permet de configurer automatiquement les PC. 

Nous allons dans un premier temps ajouter un serveur DHCP au premier réseau.


Un serveur DHCP doit être configuré en lui donnant :

* Une adresse IP statique. 

* L'adresse IP de la passerelle.

* Une plage d'adresses IPv4 que le serveur DHCP utilisera pour attribuer automatiquement une adresse IP à tout dispositif se connectant à son réseau.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-7"><strong>(\#exr:unnamed-chunk-7) </strong></span>
Etant donné que le serveur DHCP sera connecté au premier réseau, répondez aux questions suivantes :

a. Quelle adresse IP allez-vous attribuer au serveur DHCP ? Donnez la valeur numérique de cette adresse.

b. Quelle est l'adresse IP de la passerelle par défaut du serveur ? Donnez la valeur numérique de cette adresse.

c. Donnez les valeurs numérique de la plage d'adresses IPv4 que le serveur utilisera pour attribuer des adresses IP à des PC.
</div>\EndKnitrBlock{exercise}

:::

Maintenant que la configuration du serveur est faite su papier, nous allons l'implémenter dans l'outil de simulation.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Ajoutez au premier réseau un terminal de type *Server*, que nous nommerons S.

* Cliquez sur le serveur et ouvrez l'onglet *Config*.

* Changez le nom du serveur en S.

* Ajoutez les informations concernant le *Default gateway* et donnez une adresse IP au serveur, selon les réponse que vous avez données à l'exercice précédent.

* Ouvrez l'onglet *Services* et choisissez DHCP.

* Configurez un *pool* qui correspond à la plage d'adresses que vous avez précisée à l'exercice précédent (changez le nom *Pool name*, par ex. en *network1*).
Précisez l'adresse du *Default gateway*, ignorez le *DNS server*, précisez la première adresse IP de la plage (*Start IP address*) et un masque de sous-réseau. 
Ignorez tous les autres champs.

* **Important.** Cliquez sur *Save* et pensez à activer le service DHCP en cliquant sur *On*. 

* Enfin, connectez le serveur DHCP au premier réseau à l'aide d'un cable. Attendez quelques secondes pour que les triangles vers s'affichent sur ce cable.

:::



Maintenant que le serveur DHCP est configuré, il faut l'utiliser !


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Sélectionnez un PC du premier réseau, ouvrez l'onglet *Desktop* et ensuite un invite de commandes.

* Vérifiez que vous arrivez à faire un *ping* vers le serveur DHCP $S$. Si cela n'est pas le cas, revenez à l'activité précédente et 
corrigez les erreurs de configuration.


* Si vous avez pu faire un *ping* vers le serveur DCHP, ouvrez l'onglet *Config* sur le PC.

* **Important.** Pensez à noter l'adresse IP actuelle du PC.

* Dans la section *Gateway/DNS IPv4* choisissez *DHCP* au lieu de *Static*.

* Ouvrez à nouveau l'onglet *Desktop* et ouvrez un invite de commandes.

* Saisissez la commande *ipconfig* et vérifiez que maintenant votre PC a une nouvelle adresse IP et que la passerelle par défaut est correctement configurée.

* Faites un *ping* vers un autre PC du premier réseau et vers un autre PC du deuxième réseau pour vous assurer que le PC qui a obtenu l'adresse IP du serveur DHCP puisse encore communiquer avec les autres.

:::



:::{.infobox .curiosity data-latex="curiosity"}
**Bon à savoir**

Pensez à sauvegarder votre travail !

:::


## Etude d'un échange DHCP

Nous allons maintenant étudier plus en profondeur les échanges entre un PC et un serveur DHCP pour bien apprendre comment 
le protocole DHCP marche.

N'hésitez pas à revoir les transparents du cours pour avoir une idée générale des messages que vous devrez vous attendre à trouver.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Passez en mode *Simulation* et démarrez la simulation.

* Selectionnez un autre PC du premier réseau (pas celui que vous avez configuré dans l'activité précédente )

* Activez le DHCP sur ce PC.

* Laissez dérouler la simulation. Vous la metterez en pause lorsque vous ne verrez plus d'échanges DHCP/ARP.

:::



::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

Regardez le premier message DHCP dans le panneau de simulation.

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-8"><strong>(\#exr:unnamed-chunk-8) </strong></span>

a. Quelle est l'adresse MAC source ? A quel dispositif cette adresse correspond-t-elle ?

b. Quelle est l'adresse MAC destination ? A quel dispositif cette adresse correspond-t-elle ?

c. Quelle est l'adresse IP source ? A quel dispositif cette adresse correspond-t-elle ?

d. Quelle est l'adresse IP destination ? A quel dispositif cette adresse correspond-t-elle ?

e. Regardez les destinataires des messages DHCP qui suivent immediatement le premier, est-ce que cela est cohérent avec les adresses MAC et IP destination que vous avez notées ?

f. Quel est le protocole de la couche transport utilisé dans ces messages DHCP ? Quels sont les ports source et destination ?
</div>\EndKnitrBlock{exercise}

:::


Maintenant nous allons nous concentrer sur la réponse du serveur.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-9"><strong>(\#exr:unnamed-chunk-9) </strong></span>
Identifiez le premier message de réponse du DHCP dans le panneau de simulation.

**Ignorez pour le moment les échanges ICMP et ARP.**

a. Quelle est l'adresse MAC source ? A quel dispositif cette adresse correspond-t-elle ?

b. Quelle est l'adresse MAC destination ? A quel dispositif cette adresse correspond-t-elle ?

c. Quelle est l'adresse IP source ? A quel dispositif cette adresse correspond-t-elle ?

d. Quelle est l'adresse IP destination ? A quel dispositif cette adresse correspond-t-elle ?
</div>\EndKnitrBlock{exercise}

:::

Ensuite on va voir ce qui se passe après la réponse du serveur.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-10"><strong>(\#exr:unnamed-chunk-10) </strong></span>

a. Quel dispositif réagit à la réponse du serveur ?

b. Quelle est l'adresse de destination de cette réaction ?

c. Est-ce que le serveur répond à cette réaction ?

d. Vérifiez que l'échange des messages que vous avez identifiés correspond bien aux messages décrits dans les supports de cours.
</div>\EndKnitrBlock{exercise}

:::

Maintenant on va se préoccuper des messages ICMP.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-11"><strong>(\#exr:unnamed-chunk-11) </strong></span>
A quoi sert selon vous le message ICMP (*ping*) envoyé par le serveur ? Analysez le message pour essayer de comprendre.
</div>\EndKnitrBlock{exercise}

:::

Avant de continuer, pensez à terminer l'activité suivante.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Passez en mode *Realtime*.

* Activez le DHCP sur tous les ordinateurs du premier réseau. Assurez-vous que chaque ordinateur a ainsi une adresse IP valide.

:::


## Serveur DHCP pour le deuxième réseau

Maintenant on va ajouter la fonctionnalité DHCP sur le deuxième réseau.
Une solution possible consisterait à ajouter  un deuxième serveur DHCP au deuxième réseau 
et à le configurer avec une plage d'addresses pour le deuxième réseau.

Cette solution étant inefficace (on ne va pas prévoir un serveur DHCP pour chaque réseau), on préfère ajouter une deuxième plage d'addresses sur notre serveur $S$.


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

Ajoutez au serveur $S$ une deuxième plage d'addresses  pour le deuxième réseau. 

:::


On essaie maintenant d'activer le DHCP sur l'un des ordinateurs du deuxième réseau.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-12"><strong>(\#exr:unnamed-chunk-12) </strong></span>

* Passez en mode *Simulation* et demarrez la simulation.

* Choisissez l'un des ordinateurs du deuxième réseau et activez le DCHP sur celui-ci.

* Observez le chemin pris par les messages DHCP.

Est-ce que les messages DHCP arrivent au serveur $S$? Pourquoi ?


</div>\EndKnitrBlock{exercise}

:::

On vérifie la configuration réseau de l'ordinateur choisi.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-13"><strong>(\#exr:unnamed-chunk-13) </strong></span>

* Cliquez sur l'ordinateur choisi et ouvrez l'onglet *Desktop*.

* Ouvrez un invite de commandes et tapez la commande *ipconfig*.

* Quelle adresse IP cet ordinateur a-t-il reçu ? Pourriez-vous expliquer en quelques mots ?

* Est-ce que cet ordinateur a reçu l'adresse IP de la passerelle ? Cela vous surprend ?

</div>\EndKnitrBlock{exercise}

:::


Pour résoudre les problèmes rencontrés dans les activités précédentes, on procède de la manière suivante :


::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Cliquez sur le routeur $R1$ et ouvrez l'onglet CLI. Cela vous permet d'accèder au terminal (CLI - Command Line Interface) de configuration du routeur.

* Le terminal devrait afficher un invite *Router>*. Si cela n'est pas le cas, appuyez sur la touche *Entrée* de votre clavier.

* Il faut maintenant saisir des commandes pour passer en mode configuration du routeur.
Les commandes à saisir sont, dans l'ordre (après chaque commande, appuyez sur la touche *Entrée*):

<center>

``
enable
``

``
configure terminal
``

</center>

* La  commande suivante sert à passer en mode configuration de l'interface du routeur reliée au deuxième réseau. <br> **Important.** Dans la commande suivante il faut remplacer XXX par le nom de l'interface reliée au premier routeur. 
Vous pouvez retrouver le nom de cette interface en passant la souris sur le cable reliant le routeur au deuxième réseau.

<center>

``
interface XXX
``

</center>

* Ensuite, sasissez la commande suivante en remplaçant IPDHCP par l'adresse IP de votre serveur DHCP.
On vous demandera plus tard à quoi cette comment sert.

<center>

``
ip helper-address IPDHCP
``

</center>



* Pour sortir de la configuration saisissez la commande suivante :

<center>

``end``

</center>

* Passez en mode *Simulation*.

* Cliquez sur l'ordinateur du deuxième réseau que vous aviez choisi avant, et ouvrez l'invite des commandes. 
Cochez la case *Top* que vous trouvez en bas à gauche de l'invite. 

* Décalez la fenêtre de l'invite de manière à pouvoir avoir une vision complète des deux réseaux.

* Saissez la commande ``ipconfig /renew`` dans l'invite des commandes.

* Démarrez la simulation et observez attentivement le chemin des messages DHCP. 

* Quand la commande ``ipconfig /renew`` se termine, elle affichera dans l'invite de commande la configuration réseau 
obtenue du serveur DHCP. Si ce n'est pas le cas, il faut revoir la configuration de votre serveur DHCP et de votre routeur.

* Si la commande ``ipconfig /renew`` se termine et que votre ordinateur a obtenu une configuration correcte, 
vous pouvez mettre en pause la simulation. **Ne passez pas en mode *Realtime* et ne fermez pas l'invite de commandes, car sinon le panneau de simulation sera reinisialisé et 
vous perdrez tous les messages**.

:::

Le moment est venu de mieux comprendre ce qui s'est passé.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-14"><strong>(\#exr:unnamed-chunk-14) </strong></span>

a. Sur la base de ce que vous avez observé, quelle est utilité de la commande ``ip helper-address`` que vous avez sasie 
dans l'activité précédente ?

b. Pourriez-vous identifier le premier message DHCP (un DHCP discover) reçu par $S$ ? Est-ce que le routeur $R1$ l'a envoyé en broadcast ou 
bien il a été envoyé directement au serveur DHCP ?

c. Le service DHCP en exécution sur $S$ (c'est à dire le logiciel qui est en charge de réaliser le service DHCP) 
reçoit le message DHCP discover dépourvu des entêtes de la couche 2 et 3. 
Comment ce logiciel arrive-t-il a déterminer qu'il a reçu ce message du routeur $R1$ ? 
**Coup de pouce.** Regardez le contenu du message à la couche DHCP (application).

</div>\EndKnitrBlock{exercise}

:::

Maintenant il faut bien activer le DHCP sur tous les ordinateurs du deuxième réseau.

::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Passez en mode *Realtime*.

* Activez le DHCP sur tous les ordinateurs du deuxième réseau. 
Assurez-vous que chaque ordinateur a ainsi une adresse IP valide.

:::

:::{.infobox .curiosity data-latex="curiosity"}
**Bon à savoir**

Pensez à sauvegarder votre travail !

:::


# Serveur HTTP

Nous allons ajouter un serveur HTTP dans le deuxième réseau. 

::: {.infobox .activitybox data-latex="{exercisebox}"}
**Activité**

* Ajoutez un nouveau serveur au deuxième réseau ; nous nommerons ce serveur *mywebserver*. 

* Reliez *mywebserver* au commutateur du deuxième réseau.

* Cliquez sur  *mywebserver* et ouvrez l'onglet *Services*, puis selectionnez HTTP.

* Vous devriez voir que le service HTTP est déjà activé. En plus, le serveur gère déjà un certain nombre de fichiers HTML (des pages Web).

* Maintenant cliquez sur  un ordinateur de votre réseau (l'ordinateur ne doit pas nécessairement être connecté au deuxième réseau) et ouvrez l'onglet *Desktop*.

* Cliquez sur *Web Browser*.

* Lorsque le navigateur s'ouvrira, saisissez l'adresse IP de *mywebserver* dans le champs *URL*.

* Cliquez sur *Go* ; vous devriez voir apparaître une page Web (c'est le contenu du fichier *index.html* géré par *mywebserver*).

:::

Maintenant  il faut étudier les échanges HTTP et les expliquer.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-15"><strong>(\#exr:unnamed-chunk-15) </strong></span>
Passez en mode *Simulation* et cliquez à nouveau sur *Go*. 
Expliquez le chemin des messages HTTP et leur contenu.

</div>\EndKnitrBlock{exercise}

:::

Lorsque nous naviguons sur le Web, nous ne sommes jamais amenés à rentrer des adresses IP dans le navigateur Web (fort heureusement !).
On va voir si cela peut être le cas ici.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-16"><strong>(\#exr:unnamed-chunk-16) </strong></span>
* Passez en mode *Realtime*.

* Dans le champ URL du navigateur saisissez l'URL *mywebserver.com* et cliquez sur *Go*.

a. Qu'obtenez-vous ?

b. Êtes-vous surpris ?

</div>\EndKnitrBlock{exercise}

:::

Le moment est venu de configurer un serveur DNS.

# Configuration d'un serveur DNS

Pour la configuration d'un serveur DNS, nous n'allons pas rajouter un nouvel ordinateur à notre réseau.
Rappelez-vous qu'un serveur DNS est un logiciel, et donc il n'est pas interdit de le faire tourner sur le même ordinateur sur lequel d'autres services sont 
en exécution.

Dans notre cas, nous allons activer le service DNS sur le serveur $S$, celui qui nous sert aussi de serveur DHCP.

Vous devriez maintenant savoir comment configurer un service. 

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**

\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-17"><strong>(\#exr:unnamed-chunk-17) </strong></span>
Activez le service DNS sur $S$. 
Ajoutez au DNS un enregistrement de ressource pour que le nom du domaine *mywebserver.com* corresponde à l'adresse IP du serveur HTTP *mywebserver*.

a. Quel type d'enregistrement de ressource allez-vous ajouter ?

b. Ouvrez un navigateur sur l'un des ordinateurs de votre réseau. Saisissez l'URL *mywebserver.com*. Est-ce que vous arrivez à accèder à la page que vous avez vu tout à l'heure ? 
Pourquoi ? Que faut-il faire pour résoudre ce problème ?

c. Une fois le problème résolu, passez en mode *Simulation* et saisissez à nouveau l'URL *mywebserver.com*. Observez le chemin et le contenu des messages DNS et décrivez-les.

</div>\EndKnitrBlock{exercise}

:::  --></p>

          </div>

          



          
        </div>

        
      </article>

      

    </main>
  </div>
</div>


      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.3da86581634ab22d5bb3fc4505df30a5.js"></script>

    






  
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
