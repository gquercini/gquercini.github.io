<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Gianluca Quercini">

  
  
  
    
  
  <meta name="description" content="Text of the lab assignment on Docker">

  
  <link rel="alternate" hreflang="en-us" href="/courses/cloud-computing/tutorials/tutorial-docker/">

  


  
  
  
  <meta name="theme-color" content="rgb(0, 136, 204)">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  


  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu68b06f59cdf252d86e7129a31e131766_426695_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu68b06f59cdf252d86e7129a31e131766_426695_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/courses/cloud-computing/tutorials/tutorial-docker/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Gianluca Quercini">
  <meta property="og:url" content="/courses/cloud-computing/tutorials/tutorial-docker/">
  <meta property="og:title" content="Getting started with Docker | Gianluca Quercini">
  <meta property="og:description" content="Text of the lab assignment on Docker"><meta property="og:image" content="img/map[gravatar:%!s(bool=true) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=true) shape:circle]"><meta property="og:locale" content="en-us">
  
    
    
  

  



  


  


  





  <title>Getting started with Docker | Gianluca Quercini</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Gianluca Quercini</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Gianluca Quercini</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


  

  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      


<script src="/js/toggle-menu.js"></script>







  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="overview" class="docs-toc-link" href="/courses/cloud-computing/overview/">Overview</a>
    
    <div id="overview-ddowncontent" class="overview-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="overview">
        <a href="/courses/cloud-computing/overview/">Cloud Computing</a>
      </li>
      
      
      <li class="overview">
        <a href="/courses/cloud-computing/overview/installing-docker/">Installing Docker</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="lectures" class="docs-toc-link" href="/courses/cloud-computing/lectures/lectures/">Lectures</a>
    
    <div id="lectures-ddowncontent" class="lectures-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="lectures">
        <a href="/courses/cloud-computing/lectures/lectures/">Overview</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="tutorials" class="docs-toc-link" href="/courses/cloud-computing/tutorials/cc-tutorials/">Tutorials</a>
    
    <div id="tutorials-ddowncontent" class="tutorials-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="tutorials">
        <a href="/courses/cloud-computing/tutorials/cc-tutorials/">Overview</a>
      </li>
      
      <script>open_menu_on_load("tutorials".concat("-ddowncontent"))</script>
      <li class="active tutorials">
        <a href="/courses/cloud-computing/tutorials/tutorial-docker/">1. Getting started with Docker</a>
      </li>
      
      
      <li class="tutorials">
        <a href="/courses/cloud-computing/tutorials/tutorial-kube/">2. Multi-service applications</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="labs" class="docs-toc-link" href="/courses/cloud-computing/labs/cc-labs/">Lab assignments</a>
    
    <div id="labs-ddowncontent" class="labs-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="labs">
        <a href="/courses/cloud-computing/labs/cc-labs/">Overview</a>
      </li>
      
      
      <li class="labs">
        <a href="/courses/cloud-computing/labs/kube-lab/">1. Docker &amp; Kubernetes</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="exam" class="docs-toc-link" >Exam</a>
    

  </div>
  
  <div class="docs-toc-item">

    <a onclick=open_menu_on_click(this) id="resources" class="docs-toc-link" href="/courses/cloud-computing/references/cc-references/">Resources</a>
    
    <div id="resources-ddowncontent" class="resources-ddowncontent ddowncontent">
    <ul class="nav docs-sidenav">
      
      
      <li class="resources">
        <a href="/courses/cloud-computing/references/cc-references/">References</a>
      </li>
      
      
      <li class="resources">
        <a href="/courses/cloud-computing/references/docker-primer/">Docker primer</a>
      </li>
      
      
      <li class="resources">
        <a href="/courses/cloud-computing/references/docker-cheat-sheet/">Docker Cheat sheet</a>
      </li>
      
      
      <li class="resources">
        <a href="/courses/cloud-computing/references/linux-introduction/">Introduction to Linux</a>
      </li>
      
    </ul>
    </div>
    
    

  </div>
  
  
</nav>

    </div>

    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          <div class="heading">Cloud computing — Tutorial 1</div>
          <h1>Getting started with Docker</h1>
          <hr>
          <div class="logo">
            <p><img src="/img/cs-logo.png" width="20%" style="display: block; margin: auto;" /></p>
            </div>

          <div class="article-style">
            


<p><link rel="stylesheet" href="/styles/course.css">
<link rel="stylesheet" href="/styles/cloud-computing.css"></p>
<p>In this tutorial you’ll learn:</p>
<ul>
<li>How to run <strong>containers</strong>.</li>
<li>How to define and build <strong>images</strong>.</li>
<li>How to create and use <strong>volumes</strong>.</li>
<li>How to define and use <strong>networks</strong>.</li>
</ul>
<p>Prerequisites:</p>
<ul>
<li>Having installed Docker on your computer or having imported the Linux virtual machine either with VirtualBox or with Multipass.</li>
</ul>
<details>
<p><summary>Using a virtual machine with Multipass? Click here for more info</summary></p>
<div class="infobox warning">
<p><strong>Multipass commands</strong></p>
<ul>
<li><p>To start the virtual machine, type <code>multipass start cloudvm</code>.</p></li>
<li><p>The folder <code>/home/ubuntu/labs</code> in the virtual machine is mounted (i.e., linked) to the folder
on YOUR computer (let’s call it <code>LAB</code>) where you’ll store all your lab material.
You specified this folder when you installed the virtual machine.</p></li>
<li><p>If you don’t remember the path to the folder linked to <code>/home/ubuntu/labs</code>, type the
command <code>multipass info cloudvm</code>.</p></li>
<li><p>To open a terminal into the virtual machine, type <code>multipass shell cloudvm</code>.</p></li>
<li><p>When the terminal opens, the current working directory is <code>/home/ubuntu</code>.</p></li>
<li><p>Type <code>cd labs</code> to move to the folder where you’ll find your lab material.</p></li>
<li><p>You’ll use the virtual machine terminal only to type the Docker commands.
You can use all the tools installed on your machine to create and manage the files
in the directory <code>LAB</code> directly from your computer.</p></li>
<li><p>Once the lab is over, type <code>exit</code> to leave the virtual machine terminal. This will lead you back
to the terminal of your computer.</p></li>
<li><p>In the terminal of your computer, type <code>multipass stop cloudvm</code> to stop the virtual machine.
This will NOT destroy your files! It just stops the virtual machine from needlessly using the resources of your computer.</p></li>
</ul>
</div>
</details>
<ul>
<li>Being familiar with the notions of containers, images,
volumes and networks in Docker.
See the <a href="https://centralesupelec.edunao.com/pluginfile.php/219281/mod_resource/content/3/cccs-lecture02-en.pdf" target="_blank">Lecture 2</a>
for an introduction.</li>
<li>Being familiar with the <a href="/courses/cloud-computing/references/linux-introduction" target="_blank">basic notions of Linux</a>.</li>
<li>Don’t hesitate to look at the <a href="/courses/cloud-computing/references/docker-cheat-sheet" target="_blank">Docker cheat sheet</a>
to verify the syntax of the Docker commands.</li>
</ul>
<div class="infobox warning">
<p><strong>Terminology</strong></p>
<ul>
<li><p>You’ll use the <strong>terminal</strong> to run Docker commands.
Referring to the
<a href="/courses/cloud-computing/references/docker-primer#fig:docker-architecture" target="_blank">Docker architecture</a>,
the terminal is the <strong>client</strong> that communicates with
the Docker daemon.</p></li>
<li><p>Docker runs <strong>containers</strong> on your computer.
We’ll refer to your computer as the <strong>host</strong>,
the containers being the <strong>guests</strong>.</p></li>
</ul>
<div class="last-child">
<ul>
<li>A <strong>containerized application</strong>
is an application running in a container.</li>
</ul>
</div>
</div>
<div id="running" class="section level1">
<h1><span class="header-section-number">1</span> Running containers</h1>
<!--The command used to run a container 
is ``docker run`` followed by four parameters:

```shell
docker run [options] image-name [command] [arg]
```

The four parameters are:

* *options*. List of options. 
* *image-name*. The fully qualified name of the image used to run the container. 
* *command*. The command to be executed in the container.
* *arg*. The arguments taken by the command executed in the container.

Only the parameter *image-name* is mandatory. 
The fully qualified name of an image is specified as a sequence of four fields, 
formatted as follows:

```shell
registry_url/user/name:tag
```

where:

* *registry_url* (optional). The URL of the registry that provides the image. 
If its value is not specified, the image 
will be looked up for in the 
[DockerHub registry](https://hub.docker.com){target="_blank"}.
* *user* (optional).  The identifier of the user or organization that created the image. 
The default value is *library*.
* *name* (mandatory). The name of the image. 
* *tag* (optional). It specifies the image version.
If its value is not specified, 
the tag *latest* is used, pointing to the latest image version. -->
<!--
::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-1"><strong>(\#exr:unnamed-chunk-1) </strong></span>
For each of the following images, 
specify the registry name, the user, the name and the tag.

1. registry.redhat.io/rhel8/mysql-80

2. alpine:3.11

::::: {.last-child}
3. alpine
:::::
</div>\EndKnitrBlock{exercise}
:::



<details>

<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

1. Registry: *registry.redhat.io*, user: *rhel8*, name: *mysql-80*,
tag: *latest*

2. Registry: *DockerHub*, user: *library*, name: *alpine*, tag: *3.11*

3. Registry: *DockerHub*, user: *library*, name: *alpine*, tag: *latest*
:::

</details>



::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-2"><strong>(\#exr:unnamed-chunk-2) </strong></span>What's the difference between the following image names?

1. alpine:latest

2. registry.hub.docker.com/library/alpine

::::: {.last-child}
3. alpine
:::::
</div>\EndKnitrBlock{exercise}


:::


<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

There's no difference. They all point to the same image, that is
the latest version of *alpine* in the DockerHub registry.

:::

</details>
-->
<p>We now learn how to use the command <code>docker run</code> and some of
its options.
In the following exercises, we’ll run containers from the image named
<em>alpine</em> that is
<a href="https://hub.docker.com/_/alpine" target="_blank">available on the DockerHub registry</a>.
This image provides a lightweight distribution
(i.e., it doesn’t contain many features) of Linux.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-3" class="exercise"><strong>Exercise 1.1  </strong></span>You want to run the container from the latest version of
the image <em>alpine</em>.
Which command would you write in the terminal?
Execute it.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The goal of this exercise is to start playing with the
<code>docker run</code> command.
Since the question doesn’t say anything about the
options, nor does it mention the command to run inside the container,
we’d type:</p>
<p><code>docker run alpine</code></p>
</div>
</details>
<!--::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-4"><strong>(\#exr:unnamed-chunk-4) </strong></span>Execute the command that you proposed in the previous exercise, 
observe the output in the terminal and explain the actions 
taken by Docker to run the container.</div>\EndKnitrBlock{exercise}


:::


<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

The output obtained from executing the command should 
look like as follows:

```bash
Unable to find image 'alpine:latest' locally
latest: Pulling from library/alpine
aad63a933944: Pull complete 
Digest: sha256:b276d875eeed9c7d3f1cfa7edb06b22ed22b14219a7d67c52c56612330348239
Status: Downloaded newer image for alpine:latest
```

Here's what happens under the hood:

1. Docker looks for an image named *alpine:latest* in the host 
computer and cannot find it.

2. Docker *pulls* (i.e., downloads) the image from the DockerHub registry.

:::

</details>-->
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-5" class="exercise"><strong>Exercise 1.2  </strong></span>Is the container still running?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>In order to list all containers still running on the host, type the
following command:</p>
<p><code>docker container ls</code></p>
<p>Your container shouldn’t appear in the output,
because it’s not running.
In order to see all containers, including those that are not
running, type the following command:</p>
<p><code>docker container ls -a</code></p>
</div>
</details>
<!--::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-6"><strong>(\#exr:unnamed-chunk-6) </strong></span>What information is displayed for each container?</div>\EndKnitrBlock{exercise}

:::


<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

* The identifier of the container.

* The name of the image used to run the container (it should be *alpine* for your 
container).

* The command executed within the container (it should be ``/bin/sh`` for your container).

* When the container has been created.

* The container current status (it should be *exited (0) x seconds ago* for your container).

* The network ports used by the container (we'll study them later).

* The name of the container. If you don't specify any when you 
run the container (as is our case),
Docker generates a random name by concatenating an adjective and 
a famous scientist's name (e.g., *agitated_newton*).

:::

</details>-->
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-7" class="exercise"><strong>Exercise 1.3  </strong></span>By looking at the command executed within the container (<code>/bin/sh</code>),
can you tell why the container stopped without giving any output?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The command is <code>/bin/sh</code>;
the container runs a Linux terminal.
But since we didn’t specify what to do with that terminal
(we didn’t run any Linux command, nor we tried to access the terminal),
the container stopped.</p>
</div>
</details>
<p>We’re now going to do something useful with the image <em>alpine</em>.
Make sure you read the <strong>good practices</strong> that you should
adopt while playing with images and containers.</p>
<div class="infobox curiosity">
<p><strong>Good practices</strong></p>
<ol style="list-style-type: decimal">
<li><strong>Name your containers.</strong> Although Docker assigns a default name to a new container,
it’s usually a good practice to give a container a name of your
choice to make it easily distinguishable. You can do it by using the option
<code>--name</code>. Try the following:</li>
</ol>
<p><code>docker run --name my-alpine alpine</code></p>
<p>As before, the container stops immediately.
If you list all your containers by typing again:</p>
<p><code>docker container ls -a</code></p>
<p>you should see a container named <em>my-alpine</em>.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Remove automatically a container if you use it once.</strong>
Unless you want to reuse your container later, you can ask Docker to automatically remove it
when it stops by using the option <code>--rm</code>.
This will prevent unused containers from taking up too much disk space.</li>
</ol>
<p>Try the following:</p>
<p><code>docker run --rm --name container-to-remove alpine</code></p>
<p>If you list all the containers you should see that there is no container
named <em>container-to-remove</em>.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Remove unused containers.</strong> Stopped containers that have been run without
using the option <code>--rm</code> are still stored in the host.
If you want to remove a specific
container (e.g., <em>my-alpine</em>), use the following command:</li>
</ol>
<p><code>docker container rm my-alpine</code></p>
<p>If you want to remove all stopped containers, use the
following command:</p>
<p><code>docker container prune</code></p>
<ol start="4" style="list-style-type: decimal">
<li><strong>Remove unused images.</strong> Images can take up a lot of disk space.
As a result, you should remember to remove those that you don’t intend to use
any longer.
The commands to remove a specific image
and prune unused ones are <code>docker image rm</code>
and <code>docker image prune -a</code> respectively.</li>
</ol>
</div>
<div id="pass-a-command-to-the-containerized-application" class="section level2">
<h2><span class="header-section-number">1.1</span> Pass a command to the containerized application</h2>
<p>Remember that the template of <code>docker run</code> is the following:</p>
<p><code>docker run [options] image-name [command] [arg]</code></p>
<p>The optional parameter <em>command</em> refers to a command
that you can pass the containerized application, possibly with some arguments
(parameter <em>arg</em>).</p>
<p>Let’s see an example.
As we saw before, when we run a container from the image <em>alpine</em>,
a Linux terminal <code>/bin/sh</code> is launched.</p>
<div class="infobox warning">
<p><strong>Notice</strong></p>
<p>The Linux terminal <code>/bin/sh</code> is run within the
container.
Henceforth, we’ll use the following terms:</p>
<ul>
<li><strong>Host terminal.</strong> The terminal that you use to
interact with the operating system of your computer.</li>
</ul>
<div class="last-child">
<ul>
<li><strong>Guest terminal.</strong> The terminal that is run within
the container.</li>
</ul>
</div>
</div>
<p>By using the optional parameter <em>command</em>, we can run
a command in the guest terminal.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:command-in-guest" class="exercise"><strong>Exercise 1.4  </strong></span>
Run a container from the image <em>alpine</em> and execute the
Linux command <code>ls</code> that lists the content of the current directory.</p>
<div class="last-child">
<ul>
<li>Where are the listed files stored?
In the host or in the container?</li>
</ul>
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker run --rm --name ls-test alpine ls</code></p>
<ul>
<li>The command <code>ls</code> is run in the guest terminal, therefore
what we see in the output is a list of files stored in the
container.</li>
</ul>
</div>
</details>
<div class="infobox warning">
<p><strong>Notice</strong></p>
<p>In Exercise <a href="#exr:command-in-guest">1.4</a> the command
<code>ls</code> is executed in the guest terminal, but its
output is redirected to the host terminal.</p>
<p>In other words, when we run the container, we
don’t interact directly with the guest terminal;
we just send a command and the output is redirected
to the host terminal.</p>
</div>
<p>Now let’s see how to execute a command in the guest terminal
that also requires an argument.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-8" class="exercise"><strong>Exercise 1.5  </strong></span>By using the Linux utility <code>ping</code>, check
whether the Web site <code>www.centralesupelec.fr</code> is reachable.
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker run --rm --name ping-test alpine ping www.centralesupelec.fr</code></p>
<p>In order to interrupt <code>ping</code>
just type the key combination that you’s use to
interrupt any other command in your terminal.
(typically Ctrl-C on Windows and Cmd-C in MacOs).</p>
</div>
</details>
<!--An application running in a container might need to interact 
with the user. 
For instance, the Linux 
command ``rev`` reverses whatever 
the user types on the keyboard.
In order to interact with a container, you should use the option
``-it`` of ``docker run``.


::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-9"><strong>(\#exr:unnamed-chunk-9) </strong></span>Run a container from the image *alpine* to execute the 
Linux command `rev` and interact with it.
You can stop interacting with ``rev`` by typing Ctrl+C at any time.</div>\EndKnitrBlock{exercise}


:::
<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

``
docker run --rm --name rev -it alpine rev
``

After typing the command, type a word on your keyboard
(e.g., *deeps*), press *Return* and 
you should see the same word reversed (e.g., *speed*). 

The option ``-t`` opens a guest terminal (so we can see its
output); the option ``-i`` allows you to write directly 
into the guest terminal.

In order to stop using the guest terminal, 
you'll need to press Ctrl+D (both in Windows and MacOs).

:::

</details>

-->
<p>Now run the following command:</p>
<p><code>docker run  --name my-alpine -it alpine</code></p>
<p><strong>Note:</strong> we didn’t use the option <code>--rm</code> (the container will not be removed
when we stop it, we’re going to use it again).
Moreover, we didn’t specify any command to run in the guest terminal.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-10" class="exercise"><strong>Exercise 1.6  </strong></span>What do you obtain?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>When we run a container from the image <em>alpine</em>, the command
<code>/bin/sh</code> is executed within the container.
Since we specified the option <code>-it</code>, what we obtain is an access to the
Linux terminal running in the container.</p>
</div>
</details>
</div>
<div id="starting-and-stopping-containers." class="section level2">
<h2><span class="header-section-number">1.2</span> Starting and stopping containers.</h2>
<p><code>docker run</code> is a shorthand for two Docker commands, namely
<code>docker create</code>, that creates a container from an image,
and <code>docker start</code>, that starts the container after its creation.</p>
<p>Suppose now that you want to download a Web page
by using Linux Alpine.
You can use the Linux command <code>wget</code> followed by the URL of the page
that you want to download.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:wget-exo" class="exercise"><strong>Exercise 1.7  </strong></span>By using the guest terminal
in the container <em>my-alpine</em>,
download
<a href="https://www.centralesupelec.fr/fr/presentation" target="_blank">this Web page</a>.</p>
<div class="last-child">
<ul>
<li>Where will the Web page be saved? The host computer or the container?</li>
</ul>
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Just type in <em>my-alpine</em> guest terminal the following command:</p>
<p><code>wget https://www.centralesupelec.fr/fr/presentation</code></p>
<ul>
<li>The Web page will be saved in the current directory
of the container. You can verify that the file is there
by typing <code>ls</code> in the guest terminal.</li>
</ul>
</div>
</details>
<details>
<p><summary>Want to copy the donwloaded file from the container to your computer?</summary></p>
<p>To copy the file <code>presentation</code> to your working directory, type the following command in
the host terminal:</p>
<pre><code>  docker cp &lt;containerId&gt;:/presentation .</code></pre>
<p>In the previous command, replace <code>&lt;containerId&gt;</code> with the identifier of your container. You can obtain
the identifier of the container from the output of the command <code>docker container ls -a</code>.</p>
</details>
<div class="infobox warning">
<p><strong>Where are the containers and image files stored?</strong></p>
<details>
<p><summary>If you use MacOS or Windows</summary></p>
<p>The files managed by Docker are not stored directly in your computer, but
in the Linux virtual machine installed and operated by Docker Desktop (remember, Docker always need Linux to be executed).</p>
<p>Therefore, you need to open a terminal inside that Linux virtual machine by typing the following command:</p>
<pre><code>docker run -it --rm --privileged --pid=host justincormack/nsenter1</code></pre>
<p>Once the terminal is opened, you can follow the instructions given below for Linux users.</p>
</details>
<details>
<p><summary>If you use Docker on Linux</summary></p>
<ul>
<li><p>All files managed by Docker are stored under folder <code>/var/lib/docker</code>.</p></li>
<li><p>To access that folder, you need to be root (i.e., administrator). Type the command <code>sudo su</code>.</p></li>
<li><p>If you type <code>ls /var/lib/docker</code> you can look at the folders stored under this directory. You’ll see that there are
folders corresponding to the different objects managed by Docker (containers, images, volumes and networks).</p></li>
<li><p>To locate the files of a specific container, you first need to get the <strong>container identifier</strong> by typing <code>docker container ls -a</code>.</p></li>
<li><p>Type the command <code>docker inspect &lt;container-id&gt;</code> (replace <code>&lt;container-id&gt;</code> with the identifier of the container that you intend to inspect).</p></li>
<li><p>Locate the field <code>UpperDir</code>. The value of this field is the path to the directory (let’s call it <code>CONTAINER_DIR</code>) that contains the upper layer of the container (the writable layer).
It should be a path that ends by <code>/diff</code>.</p></li>
<li><p>If you type <code>cd CONTAINER_DIR</code> (replace <code>CONTAINER_DIR</code> with the value of the field <code>UpperDir</code>) you can finally see the files stored in
your container.</p></li>
</ul>
</details>
</div>
<p>In <em>my-alpine</em> guest terminal type <code>exit</code>.
This closes the guest terminal and, as a result, stops the
container.</p>
<div class="infobox warning">
<p><strong>NOTICE</strong></p>
<p>Stopping the container will not erase any of the files
stored in the container. Removing the container will.</p>
</div>
<p>If you want to start the container <em>my-alpine</em> again, you can
use the following command:</p>
<p><code>docker container start -ai my-alpine</code></p>
<p>This will open the guest terminal of the container again;
type <code>ls</code> to verify that
the Web page that you downloaded before is still there.</p>
<details>
<p><summary>Homework (optional)</summary></p>
<p>Suppose that you need to download all the figures of
<a href="https://www.centralesupelec.fr/fr/presentation" target="_blank">this Web page</a>.
The Linux utility <code>wget</code> comes in handy.
However, you don’t have Linux and you’d like to
avoid the hassle of installing it on your computer, or in a virtual machine,
just for this task.</p>
<p>A great alternative is to run Linux in a Docker container.
Unfortunately, the Alpine distribution that we’ve been playing
with doesn’t provide
an implementation of <code>wget</code> with all the options that we need.</p>
<p>We turn to another Linux distribution, <strong>Ubuntu</strong>,
for which DockerHub has
<a href="https://hub.docker.com/_/ubuntu/" target="_blank">several images</a>.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-11" class="exercise"><strong>Exercise 1.8  </strong></span>Run a container with Ubuntu (latest) and open a guest terminal.
Call the container <em>dl-figures</em>, and avoid the option
<code>--rm</code>, we’ll use this container later.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker run --name dl-figures -it ubuntu</code></p>
</div>
</details>
<p>From now on, we’ll be interacting with the guest Ubuntu terminal.
If you type the command <code>wget</code>,
you’ll get an error (<code>bash: wget: command not found</code>).</p>
<div class="infobox warning">
<p><strong>Notice</strong></p>
<p>The image <em>Ubuntu</em> doesn’t include all the commands that you’d find
in a full-blown Ubuntu distribution;
the reason is to keep the size of the image small,
a necessary constraint given that
images are transferred over the Internet.</p>
</div>
<p>Luckily, there’s a way to install <code>wget</code> in our Ubuntu distribution.
Ubuntu provides a powerful command-line package manager called
<strong>Advanced Package Tool</strong> (APT).
First, you need to run the following command:</p>
<p><code>apt update</code></p>
<p>which fetches the available packages from a list of sources
available in file <code>/etc/apt/sources.list</code>.</p>
<p>Then, you can install <code>wget</code> by running the following command:</p>
<p><code>apt install -y wget</code></p>
<p>In order to obtain all the figures from a
Web page, type the following command:</p>
<pre class="shell"><code>wget -nd -H -p -P /my-figures -A jpg,jpeg,png,gif -e robots=off -w 0.5 https://www.centralesupelec.fr/fr/presentation</code></pre>
<p>You should see in the current directory a new folder
named <em>my-figures</em> containing the downloaded figures;
verify it by typing <code>ls my-figures</code>.</p>
<p>Before terminating, don’t forget to read your fortune cookie.
In the shell, run the following command:</p>
<p><code>apt-get install -y fortune</code></p>
<p>and then:</p>
<p><code>/usr/games/fortune -s</code></p>
<p>When you’re done, you can simply type the command <code>exit</code> to quit
the guest terminal and stop the container.</p>
</details>
</div>
</div>
<div id="creating-images" class="section level1">
<h1><span class="header-section-number">2</span> Creating Images</h1>
<p>A Docker image can be thought of as a template to create and run a container.
An image is a file that contains a <strong>layered filesystem</strong> with each layer being <strong>immutable</strong>;
this means that the files that belong to a layer cannot be
modified or deleted, nor can files be added to a layer.</p>
<p>When a container is created from an image, it
will be composed of all the image read-only layers and, on top of
them, a writable layer (termed the <strong>container layer</strong>),
where all the new files created in the container will be written.
For example, the Web page that you downloaded in Exercise <a href="#exr:wget-exo">1.7</a>
were stored in the writable layer of that container (cf <a href="https://centralesupelec.edunao.com/mod/resource/view.php?id=50468" target="_blank">Slide 64</a>).</p>
<!--## Interactive image creation

When we run the container *dl-figures*  in Section \@ref(simple-use-case), 
we modified the container to
install the command ``wget``. 
You can see the modifications by typing the 
following command:

``
docker diff dl-figures
``

The output consists of a list of files tagged with the letter A, C or D, indicating 
respectively that the file has been added (A), changed (C) or deleted (D). 
In this list you'll find the downloaded figures, as well as 
other files that have been added or modified or deleted 
when we installed ``wget``.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-12"><strong>(\#exr:unnamed-chunk-12) </strong></span>If layers, except the top one, are immutable, 
how can files that belong to the lower layers be modified or deleted?</div>\EndKnitrBlock{exercise}
:::

<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

All files marked with A are new and therefore are 
added to the writable layer of the container.

As for the existing files, they live in the immutable layers 
of the image, and therefore cannot be touched directly. 
Instead, they are copied from the bottom layers to the writable layer where 
they are modified.
This strategy is called **copy-on-write**.

The structure of layers generates a **layered filesystem** in the image; 
if different copies of the same file exist in different layers, 
the copy in the uppermost layer 
overwrites the others.

:::

</details>



We can create a new image from the container *dl-figures*, one that provides
a Ubuntu distribution with the command ``wget`` already installed, 
with the following command:


```shell
docker commit dl-figures ubuntu-with-wget
```

The command creates a new image called *ubuntu-with-wget*.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-14"><strong>(\#exr:unnamed-chunk-14) </strong></span>Run a container from the image *ubuntu-with-wget* and verify that the command
*wget* is actually installed. </div>\EndKnitrBlock{exercise}

:::

<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

Just type the following command:

``
docker run --rm -it ubuntu-with-wget
``
In the guest terminal type ``wget``: you should see the 
following output:

``
wget: missing URL
Usage: wget [OPTION]... [URL]...

Try `wget --help` for more options.
``

:::

</details>-->
<div id="dockerfiles" class="section level2">
<h2><span class="header-section-number">2.1</span> Dockerfiles</h2>
<p>The most common way to create an image is to use a <strong>Dockerfile</strong>, a
text file that contains all the instructions necessary to
build the image.
The advantage of the Dockerfile is that it can be interpreted
by the Docker engine, which makes the creation of images an automated
and repeatable task.</p>
<p>Suppose that we want to create a containerized
application to download figures from a Web page.
As a template for this application, we need to build a new
image, that we’ll call <em>fig-downloader</em>.</p>
<p>The Dockerfile containing the instructions to build the image
<em>fig-downloader</em> is as follows:</p>
<pre class="dockerfile"><code>FROM ubuntu
RUN apt-get update
RUN apt-get install -y wget
RUN mkdir -p /my-figures
WORKDIR /my-figures
ENTRYPOINT [&quot;wget&quot;, &quot;-nd&quot;, &quot;-r&quot;, &quot;-A&quot;, &quot;jpg,jpeg,bmp,png,gif&quot;]
CMD [&quot;https://www.centralesupelec.fr/fr/presentation&quot;]</code></pre>
<p>Here’s the explanation:</p>
<ol style="list-style-type: decimal">
<li><p>We use the image <em>ubuntu</em> as the <strong>base image</strong>.
This corresponds to the instruction <code>FROM ubuntu</code>.</p></li>
<li><p>We install the utility <code>wget</code> in the base image.
This corresponds to the
instructions <code>RUN apt-get update</code> and <code>RUN apt-get install -y wget</code>.</p></li>
<li><p>We create a directory <code>my-figures</code> under the root directory of the image.
This corresponds to the instruction <code>RUN mkdir -p /my-figures</code>.</p></li>
<li><p>We set the newly created directory <em>/my-figures</em> as the
<strong>working directory</strong> of the image. This corresponds to the
instruction <code>WORKDIR /my-figures</code>.</p></li>
<li><p>We specify the command to be executed when a container is run from this image.
This corresponds to the instruction</p></li>
</ol>
<p><code>ENTRYPOINT [&quot;wget&quot;, &quot;-nd&quot;, &quot;-r&quot;, &quot;-A&quot;, &quot;jpg,jpeg,bmp,png,gif&quot;]</code></p>
<p>This instruction means: execute <code>wget</code> with the options
<code>-nd</code>, <code>-r</code>, <code>-A</code>;
the last option takes a list of file
extensions (<code>jpg,jpeg,bmp,png,gif</code>) as its argument.</p>
<ol start="6" style="list-style-type: decimal">
<li>Remember that the utility <code>wget</code> takes the URL of the Web page as
an argument. The URL will be specified when we run the container from
the image <em>fig-downloader</em>.
Optionally, we can specify a default argument by using the
keyword CMD. The meaning of the instruction:</li>
</ol>
<p><code>CMD [&quot;https://www.centralesupelec.fr/fr/presentation&quot;]</code></p>
<p>is: if we don’t give any URL when we run the container, the figures will
be downloaded from
<a href="https://www.centralesupelec.fr/fr/presentation" class="uri" target="_blank">https://www.centralesupelec.fr/fr/presentation</a>.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-15" class="exercise"><strong>Exercise 2.1  </strong></span>What’s the relation between the Dockerfile lines and the image layers?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Each line corresponds to a new layer.
The first line corresponds to the bottom layer;
the last line to the top layer.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:dockerfile-creation" class="exercise"><strong>Exercise 2.2  </strong></span>Could you identify a problem in this Dockerfile?
Modify the Dockerfile accordingly.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>When creating an image, we should keep the number of layers relatively
small; in fact, the more the layers, the bigger the image will be.
Here we create three separate layers with three RUN commands; we can
simply merge the three layers.
The resulting Dockerfile will be:</p>
<pre class="dockerfile"><code>FROM ubuntu
RUN apt-get update &amp;&amp; \
    apt-get install -y wget &amp;&amp; \
    mkdir -p /my-figures
WORKDIR /my-figures
ENTRYPOINT [&quot;wget&quot;, &quot;-nd&quot;, &quot;-r&quot;, &quot;-A&quot;, &quot;jpg,jpeg,bmp,png,gif&quot;]
CMD [&quot;https://www.centralesupelec.fr/fr/presentation&quot;]</code></pre>
</div>
</details>
</div>
<div id="building-an-image" class="section level2">
<h2><span class="header-section-number">2.2</span> Building an image</h2>
<p>We’re now going to build an image from a Dockerfile.</p>
<ol style="list-style-type: decimal">
<li><p>Create a directory named <em>fig-downloader</em> in your computer with
a file named <em>Dockerfile</em> inside.</p></li>
<li><p>In the <em>Dockerfile</em> write the set of instructions that
you proposed in Exercise <a href="#exr:dockerfile-creation">2.2</a>.</p></li>
<li><p>In the terminal, set the working directory to <em>fig-downloader</em>.</p></li>
<li><p>Build an image called <em>fig-downloader</em> by executing the following command:</p></li>
</ol>
<p><code>docker build -t fig-downloader .</code></p>
<p>The <code>.</code> at the end of the command means that the Docker engine will
look for a file named <em>Dockerfile</em> in the working directory.</p>
<!--

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-16"><strong>(\#exr:unnamed-chunk-16) </strong></span>Once the image is built, type the command ``docker image ls -a``. 
What are the images with repository and tag ``<none>``?
Why are there three of such images?</div>\EndKnitrBlock{exercise}


:::

</div>

<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

These are the **intermediate images**. 
Once a layer is compiled, an intermediate image is created that 
contains that layer and all the layers underneath.
In other words, the intermediate image 
corresponding to the layer $i$ contains all files 
up to the layer $i$, including layers 1 through $i-1$.

The intermediate layers are used by the **build cache**, 
of which we'll see an example later.

Although there are five layers in the new image, there are only 
three intermediate images because:

* the base image is *ubuntu:eoan*.
* the image corresponding to the top layer is the final image *fig-downloader*.

:::

</details>
-->
<div class="infobox curiosity">
<p><strong>Good to know</strong></p>
<p>If you give the Dockerfile a different name (say, <em>Dockerfile-fig-downloader</em>),
the command to build the image will be:</p>
<p><code>docker build -t fig-downloader -f Dockerfile-fig-downloader .</code></p>
<p>The option <code>-f</code> is used to specify the name of the Dockerfile.</p>
</div>
<p>In order to verify that the new image has been created, type the following command:</p>
<p><code>docker images</code></p>
<!-- Let's dive deeper into the anatomy of an image.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-17"><strong>(\#exr:unnamed-chunk-17) </strong></span>Run the following command:

``
docker history fig-downloader
`` 

and analyze the layers of the new image. 

* Why do some layers have an ID, while others 
are marked as <i>missing</i>?

::::: {.last-child}
* Can you find the identifiers of the intermediate images?
:::::
</div>\EndKnitrBlock{exercise}


:::

<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

The layers with an ID correspond to the layers of 
the new image, including the top layer and the base image.
The layers marked as *missing* are those that compose the 
base image. Those layers are not stored in  
your computer, 
simply because they belong to an image 
that hasn't been built on your computer 
and you downloaded from the DockerHub registry.

By looking at the output of ``docker image ls -a`` and the output of this command,
we see that the layers between the base image and the top layer have the 
same identifiers as the intermediate images.

:::

</details>

-->
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:dl-1-container" class="exercise"><strong>Exercise 2.3  </strong></span>Run the following command:</p>
<p><code>docker run --name dl-1 fig-downloader</code></p>
What does it do? Where are the downloaded pictures?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>We downloaded the figures
<a href="https://www.centralesupelec.fr/fr/presentation" target="_blank">of this page</a>.
The downloaded pictures are in the folder <em>/my-figures</em>
of the container <em>dl-1</em>.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-18" class="exercise"><strong>Exercise 2.4  </strong></span>Run the following command:</p>
<pre><code>docker run --name dl-2 fig-downloader https://www.centralesupelec.fr/</code></pre>
What does it do? Where are the downloaded pictures?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>We downloaded the figures
<a href="https://www.centralesupelec.fr" target="_blank">of this page</a>.
We basically overwrote the URL specified by the CMD keyword with a new
one.
The downloaded pictures are in the folder <em>/my-figures</em>
of the container <em>dl-2</em>.</p>
</div>
</details>
</div>
<div id="containerized-python-application" class="section level2">
<h2><span class="header-section-number">2.3</span> Containerized Python application</h2>
<p>Download <a href="/courses/cloud-computing/tutorial-docker/word-frequency.zip">this archive file</a>
and unzip it into your working directory.
In this archive you’ll find:</p>
<ul>
<li>A Dockerfile.</li>
<li>A Python script <em>main.py</em> that asks the user to enter the URL and the language of a Web page,
and prints the 10 most frequent words occurring in that page.</li>
<li>A file <em>requirements.txt</em> with the list of the Python packages
needed to run the given script.</li>
</ul>
<p>The content of the Dockerfile is as follows:</p>
<pre class="dockerfile"><code>FROM python:3.7-slim
RUN mkdir -p /app
WORKDIR /app
COPY ./main.py ./requirements.txt /app/
RUN pip install -r requirements.txt
ENTRYPOINT [&quot;python&quot;, &quot;main.py&quot;]</code></pre>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-19" class="exercise"><strong>Exercise 2.5  </strong></span>Describe what this Dockerfile does.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<ul>
<li>Takes <em>python:3.7-slim</em> as the base image.</li>
<li>Creates a new folder <em>app</em> in the image under the root directory.</li>
<li>Changes the working directory to <em>/app</em>.</li>
<li>Copies the files <em>main.py</em> and <em>requirements.txt</em> from the local
computer to the directory <em>/app</em> in the image.</li>
<li>Runs the command <code>pip install</code> to install the Python libraries
specified in the file <em>requirements.txt</em>.</li>
<li>Executes the command <code>python main.py</code>.</li>
</ul>
</div>
</details>
<div class="infobox exercisebox" word-latex="{exercisebox}">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-20" class="exercise"><strong>Exercise 2.6  </strong></span>Build an image called <em>wordfreq</em> from this Dockerfile.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker build -t wordfreq .</code></p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-21" class="exercise"><strong>Exercise 2.7  </strong></span>Without changing the Dockerfile, rebuild the same image.
What do you notice?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The build is very fast.
Since we didn’t change the Dockerfile, the image
is rebuilt by using the image layers created
previously.
This is clearly indicated by the word <strong>CACHED</strong> written
at each layer.
Using the already stored layers is called <strong>build cache</strong>.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-22" class="exercise"><strong>Exercise 2.8  </strong></span>What happens if you modify a line in the Python script and
you rebuild the image?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Add any instruction at the end of <em>main.py</em>, such as:</p>
<pre class="python"><code>print(&quot;Finish!&quot;)</code></pre>
<p>then rebuild the image.
The three bottom layers are not affected by the modification, therefore
they benefit from the build cache.
Layer 4 is the first affected by the modification.
This layer, and those above, need therefore to be
rebuilt.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-23" class="exercise"><strong>Exercise 2.9  </strong></span>Based on the previous considerations,
can you tell what’s wrong with this Dockerfile?
Modify the Dockerfile accordingly and rebuild the image.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Each time we modify <em>main.py</em> and we rebuild the image,
the layer 4 and 5 are recreated, meaning that all the Python packages
are downloaded and installed.
Depending on the size and number of the packages, this might
take some while.
A better way to structure the Dockerfile is to install the
packages before copying the Python script to the image.
Here is how we should modify the Dockerfile:</p>
<pre class="dockerfile"><code>FROM python:3.7-slim
RUN mkdir -p /app
WORKDIR /app
COPY ./requirements.txt /app/
RUN pip install -r requirements.txt
COPY ./main.py /app/
ENTRYPOINT [&quot;python&quot;, &quot;main.py&quot;]</code></pre>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-24" class="exercise"><strong>Exercise 2.10  </strong></span>Modify <em>main.py</em> by adding a new line of code and rebuild the image.
What changed?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The Python packages are not reinstalled, as a result rebuilding the image<br />
takes much less time than before.</p>
</div>
</details>
<p>Play with the application by running the following command:</p>
<p><code>docker run --rm -it  wordfreq</code></p>
<p>The containerized application will prompt you to insert the URL of a webpage and
the language of the page (in English).
The output will be the 20 most used words in the webpage.</p>
</div>
</div>
<div id="data-volumes" class="section level1">
<h1><span class="header-section-number">3</span> Data Volumes</h1>
<p>In Exercise <a href="#exr:dl-1-container">2.3</a> you’ve been asked to run a container named
<em>dl-1</em> to download some figures from a Web page.
The figures were downloaded into the
directory <em>/my-figures</em> of the container.
But we left a question unanswered.</p>
<p><strong>How do we transfer those figures from the container to the host computer?</strong></p>
<p>The solution is to use <strong>volumes</strong>.</p>
<!--One way to go about that is to run the following command in the host terminal:

``
docker cp dl-1:/my-figures .
``

This will copy the directory */my-figures* from the container *dl-1* to
the host computer working directory.
You can verify it by yourself.

::: {.infobox .exercisebox data-latex="{exercisebox}"}
**Exercise**


\BeginKnitrBlock{exercise}<div class="exercise"><span class="exercise" id="exr:unnamed-chunk-25"><strong>(\#exr:unnamed-chunk-25) </strong></span>Can you tell why this solution is less than ideal?</div>\EndKnitrBlock{exercise}


:::
<details>
<summary>Solution</summary>

::: {.infobox .exosolution data-latex="{exercisebox}"}

1. After running the container we need to do an additional action to copy
the figures from the container to the host computer.

2. The container is created and run only to download some figures.
We'd like to remove it automatically (with the option ``--rm``) when its 
execution is over. However, if we do so, the pictures will be lost before 
we can copy them to the host computer.

:::

</details>

## Using a host volume

A better solution is to **mount** (i.e., attach) 
a directory of the host computer at the container's directory 
*/my-figures* when we run it.
Let's see how it works.

**Step 1.** Create a directory named *figs-volume* in your working directory.

**Step 2.** Type and execute the following command:

```shell
docker run --rm -v $(pwd)/figs-volume:/my-figures fig-downloader
```

This command runs a container from the image *fig-downloader*. 

* With the option ``-v`` we specify  that we want to mount the directory
*\$(pwd)/figs-volume* (*\$(pwd)* indicates the host working directory)
at the directory *figs-volume* in the container;

* The option ``--rm`` indicates that we want the container to be 
removed when its execution is over.

**Step 3.** Verify that the pictures are in the folder *figs-volume*.

In this example, we've used the directory *figs-volume* as a 
**volume** (essentially, an external storage area) of the container;
when the container is destroyed, the volume remains with all its data.-->
<div id="docker-volumes" class="section level2">
<h2><span class="header-section-number">3.1</span> Docker volumes</h2>
<p>A volume can be seen as a virtual storage device attached to a container.
All files there are written to a volume survive the containerized application that
created them. In other words, when a container is destroyed,
all the files created by the application in the container remain in the volume.</p>
<p>Let’s create a new Docker volume called <em>data-volume</em>:</p>
<p><code>docker volume create data-volume</code></p>
<div class="infobox curiosity">
<p><strong>Good to know (advanced notion)</strong></p>
<p><strong>Where the data will be actually stored?</strong></p>
<p>You can inspect the new volume by typing the
following command:</p>
<p><code>docker volume inspect data-volume</code></p>
<p>A <em>mount point</em> is indicated; that’s the folder where the data
will be actually stored.
If your computer runs Linux, that folder will be available
on the host; if your computer runs Windows or MacOS,
you’ll not find that folder on your computer.
Instead, it will be available in the virtual machine
that Docker use on MacOS and Windows.</p>
<p><strong>Do you want to see the directory? (Instructions for Windows and MacOS)</strong></p>
<p>One way to look into the hidden VM is to run
the following containerized application:</p>
<p><code>docker run -it --rm --privileged --pid=host justincormack/nsenter1</code></p>
<p>This application will open a guest terminal into the VM.
You can then use the commands <code>cd</code> and <code>ls</code>
to browse to the directory indicated as the mount path
of the new volume.</p>
</div>
<div id="sharing-data" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Sharing data</h3>
<p>A Docker volume can be used to share data between containers.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-26" class="exercise"><strong>Exercise 3.1  </strong></span>Run a container from the image <code>ubuntu</code>,
specifying the options to:</p>
<ul>
<li><p>Remove the container once its execution is over.</p></li>
<li><p>Interact with the guest Linux terminal in the container.</p></li>
</ul>
<div class="last-child">
<ul>
<li>Mount the volume <em>data-volume</em> at the container’s directory <em>/data</em>.</li>
</ul>
</div>
<p>Feel free to use the <a href="/courses/cloud-computing/references/docker-cheat-sheet" target="_blank">Docker cheat sheet</a>.</p>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker run --rm -it -v data-volume:/data ubuntu</code></p>
</div>
</details>
<ol style="list-style-type: decimal">
<li>Type the following command in the guest Linux terminal to create a file
<em>test-file.txt</em> in the directory <em>/data</em>:</li>
</ol>
<p><code>echo &quot;This is a new file&quot; &gt; /data/test-file.txt</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Print to the console the content of the file with the following command:</li>
</ol>
<p><code>cat /data/test-file.txt</code></p>
<ol start="3" style="list-style-type: decimal">
<li>Type <code>exit</code> to leave the guest terminal. Since we’ve specified the option <code>--rm</code>, the container
is <strong>destroyed</strong>. Now we’re going to verify that <code>test-file.txt</code> is still accessible.</li>
</ol>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-27" class="exercise"><strong>Exercise 3.2  </strong></span>Run a container from the image <em>alpine:latest</em>,
specifying the options to:</p>
<ul>
<li><p>Remove the container once its execution is over.</p></li>
<li><p>Interact with the guest Linux terminal in the container.</p></li>
</ul>
<div class="last-child">
<ul>
<li>Mount the volume <em>data-volume</em> to the directory <em>/my-data</em>
of the container.</li>
</ul>
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p><code>docker container run --rm -it -v data-volume:/my-data alpine</code></p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-28" class="exercise"><strong>Exercise 3.3  </strong></span>Verify that you can read the file <em>test-file.txt</em>.
Which folder would you look in?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>We need to look in the folder <em>/my-data</em> because this is where
we mounted <em>data-volume</em>.</p>
<p><code>cat /my-data/test-file.txt</code></p>
</div>
</details>
<p>Type <code>exit</code> to exit the guest terminal and terminate the container.</p>
</div>
</div>
</div>
<div id="single-host-networking" class="section level1">
<h1><span class="header-section-number">4</span> Single-Host Networking</h1>
<p>In order to let containers communicate and, therefore, co-operate,
Docker defines a simple networking model known as
the <a href="/courses/cloud-computing/references/docker-primer#single-host-networking" target="_blank"><strong>container network model</strong></a></p>
<details>
<p><summary>If you use a Linux virtual machine with Multipass</summary>
In this section, you’ll need to open several terminals in the virtual machine.
You can do it easily by using <code>byobu</code>, an advanced window manager already available in your virtual machine.</p>
<ul>
<li><p>Just type <code>byobu</code> to launch the window manager.</p></li>
<li><p>If you want to open a new terminal, just press F2.</p></li>
<li><p>If you want to switch from a terminal to another, just press F3 (to move to previous terminal) or F4
(to move to next terminal).</p></li>
<li><p>If you want to close a terminal, just type <code>exit</code>.</p></li>
<li><p>When you close all terminals, <code>byobu</code> will stop executing.</p></li>
</ul>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-29" class="exercise"><strong>Exercise 4.1  </strong></span>Describe the output of the following command:</p>
<p><code>docker network ls</code></p>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The command lists all the networks created by Docker on
your computer.
For each network, the values of four attributes are shown:</p>
<ul>
<li>The identifier.</li>
<li>The name.</li>
<li>The driver used by the network.</li>
<li>The scope of the network (local or global).
A local scope means that the network connects containers
running on the same host, as opposed to a global scope that
means that containers on different hosts can communicate.</li>
</ul>
<p>Depending on the containers that you used
in the past, you might see different networks.
However, three networks are worth noting:</p>
<ul>
<li>The network named <strong>bridge</strong>, that uses the driver <strong>bridge</strong> and a local scope.
By default, any new container is attached to this network.</li>
<li>The network named <strong>host</strong>, that uses the driver <strong>host</strong> and a local scope.
It’s used when we want a container to directly use the network interface of the host.
It’s important to remember that this network should only be used when analyzing the
host’s network traffic. In the other cases, using this network exposes
the container to all sorts of security risks.</li>
<li>The network named <strong>none</strong>, that uses the driver <strong>null</strong> and a local scope.
Attaching a container to this network means that the container
isn’t connected to any network, and therefore it’s completely isolated.</li>
</ul>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-30" class="exercise"><strong>Exercise 4.2  </strong></span>The following command:</p>
<p><code>docker network inspect bridge</code></p>
outputs the configuration of the network <strong>bridge</strong>.
By looking at this configuration, can you tell
what IP addresses will be given to the containers attached to this
network? What’s the IP address of the router of this network?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The information is specified in the field named <strong>IPAM</strong>, more specifically:</p>
<ul>
<li><p><strong>Subnet</strong> indicates the range of IP addresses used by the network.
The value of this field should be 172.17.0.0/16;
the addresses range from 172.17.0.1 to 172.17.255.255.</p></li>
<li><p><strong>Gateway</strong> indicates the IP address of the router of the network.
The value should be 172.17.0.1</p></li>
</ul>
</div>
</details>
<div id="creating-networks" class="section level2">
<h2><span class="header-section-number">4.1</span> Creating networks</h2>
<p>By default, any new container is attached to the network named <em>bridge</em>.</p>
<div class="infobox exercisebox">

<div class="exercise">
<p><span id="exr:unnamed-chunk-31" class="exercise"><strong>Exercise 4.3  </strong></span>
Explain why it is not a good practice to
attach all our containers to the same network.</p>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>All new containers will be able to communicate over this network.
This is not a good idea.
If a hacker can compromise any of these containers, s/he might
be able to attack the other containers as well.
As a rule of thumb, we should attach two containers to the same network <strong>only</strong> on a
need-to-communicate basis.</p>
</div>
</details>
<p>In order to create a new network, you can use the following command:</p>
<p><code>docker network create network_name</code></p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-32" class="exercise"><strong>Exercise 4.4  </strong></span>Create two networks named <em>buckingham</em> and <em>rochefort</em> that
use the driver <em>bridge</em>.
By using the <code>docker network inspect</code> command,
look at the IP addresses of the new networks and write them down.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Just run the following commands:</p>
<p><code>docker network create buckingham</code></p>
<p><code>docker network create rochefort</code></p>
<p>The IP addresses for the network <em>buckingham</em> are
172.18.0.0/16 (addresses from 172.18.0.1 to 172.18.255.255);
The IP addresses for the network <em>rochefort</em> are:
172.19.0.0/16 (assuming that you create <em>buckingham</em>
before <em>rochefort</em>).</p>
<p>The IP addresses may be different on your machines.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-33" class="exercise"><strong>Exercise 4.5  </strong></span>Create three containers <em>athos</em>, <em>porthos</em> and <em>aramis</em> and attach them
to the two networks <em>buckingham</em> and <em>rochefort</em> as displayed
<a href="/courses/cloud-computing/references/docker-primer#fig:cnm" target="_blank">in this figure</a>.
<strong>The three containers will open a Linux Alpine shell</strong>.
You’ll need to launch the commands in three separate tabs of your terminal window.</p>
<ul>
<li>What will the IP addresses of the three containers be in the two networks?
Remember that <em>porthos</em> is attached to two networks, therefore it’ll have two
network interfaces (endpoints) and, as a result, two IP addresses.</li>
</ul>
<div class="last-child">
<ul>
<li>Verify your answers by inspecting the two networks (use the
command <code>docker network inspect</code>).</li>
</ul>
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>Here are the commands to run <em>athos</em> and <em>aramis</em> while connecting
them to <em>buckingham</em> and <em>rochefort</em> respectively.</p>
<p><code>docker run --rm -it --name athos --network buckingham  alpine</code></p>
<p><code>docker run --rm -it --name aramis --network rochefort   alpine</code></p>
<p>Here’s the command to run <em>porthos</em> and attach it to
<em>buckingham</em>:</p>
<p><code>docker run --rm -it --name porthos --network buckingham   alpine</code></p>
<p>The following command attaches <em>porthos</em> to the second network <em>rochefort</em>:</p>
<p><code>docker network connect rochefort porthos</code></p>
<p>As for the IP addresses, each network has IP addresses
in the range 172.x.0.0/16, where x is 18 in the
network <em>buckingham</em> and 19 in the network <em>rochefort</em>.
The address 172.x.0.1 is reserved for the router.
Therefore, the containers will be assigned
IP addresses from 172.x.0.2.
In this solution, we created <em>athos</em>, <em>aramis</em> and <em>portos</em>
in this order.
Therefore, the IP addresses will be:</p>
<ul>
<li>In network <em>buckingham</em>:
<ul>
<li><em>athos</em>: 172.18.0.2</li>
<li><em>porthos</em>: 172.18.0.3</li>
</ul></li>
<li>In network <em>rochefort</em>:
<ul>
<li><em>aramis</em>: 172.19.0.2</li>
<li><em>porthos</em>: 172.19.0.3</li>
</ul></li>
</ul>
<p>You can actually verify this configuration by inspecting
the two networks with the following commands:</p>
<p><code>docker network inspect buckingham</code></p>
<p><code>docker network inspect rochefort</code></p>
<p>The IP addresses might be different on your machines.</p>
</div>
</details>
</div>
<div id="communication-between-containers" class="section level2">
<h2><span class="header-section-number">4.2</span> Communication between containers</h2>
<p>Let’s see if and when the three containers can communicate.</p>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-34" class="exercise"><strong>Exercise 4.6  </strong></span>Which containers are able to communicate?
Justify your answer.
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>The only containers that cannot communicate are <em>athos</em> and <em>aramis</em>,
because they’re not connected to the same network.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-35" class="exercise"><strong>Exercise 4.7  </strong></span>Try to ping <em>porthos</em> from <em>athos</em> by using its IP address.</p>
<div class="last-child">
<ul>
<li>Which IP address of <em>porthos</em> would you use?</li>
</ul>
</div>
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>We need to use the IP address assigned to the endpoint linking
<em>porthos</em> to the network <em>buckingham</em>, to which <em>athos</em> is connected.
In our case, this is 172.18.0.3.</p>
</div>
</details>
<div class="infobox exercisebox">
<p><strong>Exercise</strong></p>

<div class="exercise">
<span id="exr:unnamed-chunk-36" class="exercise"><strong>Exercise 4.8  </strong></span>Try to ping <em>porthos</em> from <em>athos</em> by using its name.
Do you succeed? Are you surprised?
</div>
</div>
<details>
<p><summary>Solution</summary></p>
<div class="infobox exosolution">
<p>We succeed. Indeed, the network <em>buckingham</em> provides a DNS server, that
can translate names into IP addresses.</p>
</div>
</details>
<p>You can now exit the three containers.</p>
</div>
</div>

          </div>

          



          
        </div>

        
      </article>

      

    </main>
  </div>
</div>


      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.6f7ce8be710290b8c431bbc97f405d15.js"></script>

    






  
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
